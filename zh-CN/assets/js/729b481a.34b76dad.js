"use strict";(self.webpackChunktouchgfx_documentation=self.webpackChunktouchgfx_documentation||[]).push([[319],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),p=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),h=p(n),m=r,g=h["".concat(u,".").concat(m)]||h[m]||d[m]||o;return n?a.createElement(g,l(l({ref:t},c),{},{components:n})):a.createElement(g,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=h;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},70814:function(e,t,n){var a=n(67294),r=n(88678);const o=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}));class l extends a.Component{render(){return a.createElement(r.Z,{color:"var(--highlight-color-caution)",header:"Caution",type:"caution",icon:o},this.props.children)}}t.Z=l},22425:function(e,t,n){var a=n(67294);class r extends a.Component{render(){return a.createElement("div",{className:"code-header"},a.createElement("div",null,a.createElement("h5",null,this.props.children)))}}t.Z=r},44035:function(e,t,n){var a=n(67294),r=n(25026);t.Z=function(e){const t=e.noShadow||!1,n=e.width,o=e.height,l=(0,r.Z)(e.imageSource);return t?a.createElement("div",{className:"figure noshadow"},a.createElement("a",{href:l,target:"_blank"},a.createElement("img",{width:n,height:o,src:l})),a.createElement("p",null,e.children)):a.createElement("div",{className:"figure"},a.createElement("a",{href:l,target:"_blank"},a.createElement("img",{width:n,height:o,src:l})),a.createElement("p",null,e.children))}},29415:function(e,t,n){var a=n(67294),r=n(88678);const o=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}));class l extends a.Component{render(){return a.createElement(r.Z,{color:"var(--highlight-color-further-reading)",header:"Further reading",type:"further-reading",icon:o},this.props.children)}}t.Z=l},88678:function(e,t,n){var a=n(67294);class r extends a.Component{render(){const e=`highlight highlight-${this.props.type}`;return a.createElement("div",{className:e},a.createElement("div",{className:"highlight-heading"},a.createElement("h5",null,a.createElement("div",{className:"highlight-icon"},this.props.icon),this.props.header)),a.createElement("div",{className:"highlight-content"},this.props.children))}}t.Z=r},93054:function(e,t,n){var a=n(67294),r=n(88678);const o=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}));class l extends a.Component{render(){return a.createElement(r.Z,{color:"var(--highlight-color-note)",header:"Note",type:"note",icon:o},this.props.children)}}t.Z=l},18325:function(e,t,n){n.r(t),n.d(t,{assets:function(){return C},contentTitle:function(){return X},default:function(){return v},frontMatter:function(){return f},metadata:function(){return G},toc:function(){return S}});var a=n(3905),r=n(44035),o=n(93054),l=n(29415),i=n(22425),u=n(70814),p=n(39130),c=Object.defineProperty,d=Object.defineProperties,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&k(e,n,t[n]);if(m)for(var n of m(t))s.call(t,n)&&k(e,n,t[n]);return e};const f={id:"touchgfx-generator",title:"Generator\u7528\u6237\u6307\u5357"},X=void 0,G={unversionedId:"development/touchgfx-hal-development/touchgfx-generator",id:"development/touchgfx-hal-development/touchgfx-generator",title:"Generator\u7528\u6237\u6307\u5357",description:"",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/development/touchgfx-hal-development/touchgfx-generator.mdx",sourceDirName:"development/touchgfx-hal-development",slug:"/development/touchgfx-hal-development/touchgfx-generator",permalink:"/zh-CN/docs/development/touchgfx-hal-development/touchgfx-generator",draft:!1,tags:[],version:"current",frontMatter:{id:"touchgfx-generator",title:"Generator\u7528\u6237\u6307\u5357"},sidebar:"docs",previous:{title:"\u62bd\u8c61\u5c42\u67b6\u6784",permalink:"/zh-CN/docs/development/touchgfx-hal-development/touchgfx-architecture"},next:{title:"Scenarios",permalink:"/zh-CN/docs/category/scenarios"}},C={},S=[{value:"\u4f7f\u80fdTouchGFX Generator",id:"enabling-touchgfx-generator",level:2},{value:"\u751f\u6210\u7684\u4ee3\u7801\u67b6\u6784",id:"generated-code-architecture",level:2},{value:"\u7279\u6027\u6982\u8ff0",id:"feature-overview",level:2},{value:"\u663e\u793a",id:"display",level:2},{value:"\u63a5\u53e3\u4e0e\u5c3a\u5bf8",id:"interface-and-dimensions",level:3},{value:"\u5e27\u7f13\u51b2\u50cf\u7d20\u683c\u5f0f",id:"framebuffer-pixel-format",level:3},{value:"\u7f13\u51b2\u7b56\u7565",id:"buffering-strategies",level:3},{value:"\u9a71\u52a8\u5668",id:"driver",level:2},{value:"\u5e94\u7528\u6ef4\u7b54\u8ba1\u65f6\u6e90",id:"application-tick-source",level:3},{value:"\u56fe\u5f62\u52a0\u901f\u5668",id:"graphics-accelerator",level:3},{value:"\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf",id:"real-time-operating-system",level:3},{value:"ThreadX",id:"threadx-middleware-os",level:4},{value:"Enabling and configuring ThreadX from the Middleware list available in STM32CubeMX",id:"enabling-and-configuring-threadx-from-the-middleware-list-available-in-stm32cubemx",level:5},{value:"Enabling and configuring ThreadX from AZRTOS Software Pack",id:"enabling-and-configuring-threadx-from-azrtos-software-pack",level:5},{value:"FreeRTOS",id:"freertos-middleware-os",level:4},{value:"ThreadX Middleware",id:"threadx-middleware-os",level:4},{value:"\u5176\u4ed6\u517c\u5bb9CMSIS\u7684OS",id:"other-cmsis-compliant-os",level:4},{value:"\u5176\u5b83\u529f\u80fd",id:"additional-features",level:3},{value:"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668",id:"external-data-reader",level:4},{value:"8\u4f4dLTDC\u989c\u8272\u67e5\u8be2\u8868",id:"8bit-ltdc-color-look-up-table",level:4},{value:"\u89c6\u9891\u89e3\u7801",id:"video-decoding",level:2},{value:"\u7c7b\u578b",id:"video-decoding-type",level:3},{value:"\u5e76\u53d1\u89c6\u9891",id:"video-decoding-number",level:3},{value:"\u7b56\u7565",id:"video-decoding-strategy",level:3},{value:"\u89e3\u7801\u683c\u5f0f",id:"decode-format",level:3},{value:"\u7f13\u5b58\u5927\u5c0f\uff1a",id:"video-decoding-buffer-size",level:3},{value:"\u751f\u6210\u7684\u9879\u76ee",id:"generated-project",level:2},{value:"TouchGFX Designer\u9879\u76ee",id:"touchgfx-designer-project",level:2},{value:"\u4fee\u6539\u751f\u6210\u6587\u4ef6",id:"modifying-generated-behavior",level:2},{value:"\u5347\u7ea7\u9879\u76ee",id:"upgrading-projects",level:2}],N={toc:S};function v(e){var t,n=e,{components:c}=n,k=((e,t)=>{var n={};for(var a in e)g.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&m)for(var a of m(e))t.indexOf(a)<0&&s.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=T(T({},N),k),d(t,h({components:c,mdxType:"MDXLayout"}))),(0,a.kt)("p",null,"TouchGFX Generator\u662fX-CUBE-TOUCHGFX\u7684\u4e00\u90e8\u5206\uff0c\u4e5f\u662fSTM32CubeMX\u9644\u52a0\u8f6f\u4ef6\u7ec4\u4ef6\uff0c\u53ef\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u914d\u7f6eTouchGFX\u5e76\u8fd0\u884c\u4e8e\u4ed6\u7684\u786c\u4ef6\u5e73\u53f0\u4e0a\u3002 \u6839\u636e\u5df2\u6709\u7684STM32CubeMX\u8bbe\u7f6e\u548c\u7528\u6237\u8f93\u5165\uff0cTouchGFX Generator\u5c06\u751f\u6210TouchGFX\u5e94\u7528\u6240\u9700\u7684\u6709\u6548\u914d\u7f6e\u6587\u4ef6 \u8fd9\u5305\u62ecTouchGFX HAL\u3001TouchGFX OSAL\u548cTouchGFX\u914d\u7f6e\u6587\u4ef6\u3002"),(0,a.kt)("p",null,"\u901a\u8fc7STM32CubeMX\u751f\u6210\u4ee3\u7801\u540e\uff0c\u53ef\u901a\u8fc7TouchGFX Designer\u6253\u5f00TouchGFX\u9879\u76ee\uff0c\u5e76\u8fdb\u884cUI\u5f00\u53d1\u3002 TouchGFX Designer\u4f1a\u81ea\u52a8\u5c06\u4efb\u4f55\u989d\u5916\u751f\u6210\u7684\u4ee3\u7801\u6587\u4ef6\u6dfb\u52a0\u5230\u901a\u8fc7STM32CubeMX\u6240\u914d\u7f6e\u7684\u76ee\u6807IDE\u5de5\u7a0b\u3002"),(0,a.kt)("h2",T({},{id:"enabling-touchgfx-generator"}),"\u4f7f\u80fdTouchGFX Generator"),(0,a.kt)("p",null,"\u7528\u6237\u53ef\u901a\u8fc7\u6309\u201c\u9009\u62e9\u7ec4\u4ef6\u201d\u6309\u94ae\u6765\u8bbf\u95eeX-CUBE\u7684\u9644\u52a0\u529f\u80fd\u3002"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/enable-generator.png",mdxType:"Figure"},"\u9009\u62e9STM32CubeMX\u4e2d\u7684\u9644\u52a0\u8f6f\u4ef6"),(0,a.kt)("p",null,"\u4e0b\u56fe\u663e\u793a\u4e86\u9879\u76ee\u4e2d\u5982\u4f55\u4f7f\u80fdTouchGFX Generator\uff1a"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/add-generator-v4.17.png",width:"580",mdxType:"Figure"},"\u4f7f\u80fdTouchGFX Generator"),(0,a.kt)("p",null,"\u5982\u679c\u4e3a\u53cc\u6838MCU\u542f\u7528TouchGFX\uff0c\u8bf7\u786e\u4fdd\u4e3a\u6b63\u786e\u7684\u4e0a\u4e0b\u6587\u542f\u7528\u3002 TouchGFX\u53ea\u80fd\u4e3a\u5355\u4e00\u4e0a\u4e0b\u6587\u542f\u7528\uff1a"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/add-generator-dual-core-v4.17.png",mdxType:"Figure"},"\u5728\u53cc\u6838\u5fc3\u82af\u7247\u4e0a\u4f7f\u7528TouchGFX Generator"),(0,a.kt)("h2",T({},{id:"generated-code-architecture"}),"\u751f\u6210\u7684\u4ee3\u7801\u67b6\u6784"),(0,a.kt)("p",null,"\u5728\u63cf\u8ff0TouchGFX Generator\u7684\u529f\u80fd\u4e4b\u524d\uff0c\u4e86\u89e3\u6240\u751f\u6210\u4ee3\u7801\u7684\u67b6\u6784\u4ee5\u53ca\u5f00\u53d1\u4eba\u5458\u5982\u4f55\u4f7f\u7528\u8be5\u67b6\u6784\u6765\u5b9a\u5236\u914d\u7f6e\u548c\u884c\u4e3a\u81f3\u5173\u91cd\u8981\u3002"),(0,a.kt)("p",null,"\u5728STM32CubeMX\u751f\u6210\u7684\u4ee3\u7801\uff08C\u4ee3\u7801\uff09\u4e2d\uff0c",(0,a.kt)("strong",{parentName:"p"},"User Code"),"\u6bb5\u5185\u7684\u7528\u6237\u624b\u5199\u4ee3\u7801\uff0c\u4f1a\u53d7\u5230STM32CubeMX\u4fdd\u62a4\u3002\xa0\u5728TouchGFX Generator\u751f\u6210\u7684C++\u4ee3\u7801\u4e2d\uff0c\u901a\u8fc7\u7ee7\u627f\u6765\u5b9e\u73b0\u8fd9\u79cd\u7075\u6d3b\u6027\u3002"),(0,a.kt)("p",null,"\u901a\u8fc7",(0,a.kt)("em",{parentName:"p"},"Additional Software"),"\u6dfb\u52a0TouchGFX Generator\u5e76\u4f7f\u80fd\u540e\uff0cSTM32CubeMX\u603b\u662f\u4f1a\u4e3a\u9879\u76ee\u521b\u5efa\u4e00\u4e2a",(0,a.kt)("em",{parentName:"p"},"TouchGFX"),"\u6587\u4ef6\u5939\u3002 \u65e0\u8bba\u914d\u7f6e\u5982\u4f55\uff0c\u8be5\u6587\u4ef6\u5939\u603b\u662f\u5305\u542b\u76f8\u540c\u7684\u6587\u4ef6\uff0c\u800c\u6587\u4ef6\u5185\u5bb9\u5219\u56e0STM32CubeMX\u548c\u7528\u6237\u914d\u7f6e\u800c\u5f02\u3002"),(0,a.kt)("p",null,"\u4ee5\u4e0b\u5217\u8868\u6982\u8ff0\u4e86",(0,a.kt)("em",{parentName:"p"},"\u4f7f\u80fd"),"TouchGFX Generator\u7684STM32CubeMX\u9879\u76ee\u5185\u5bb9\uff0c\u5e76\u91cd\u70b9\u4ecb\u7ecd\u4e0eTouchGFX\u6709\u5173\u7684\u6587\u4ef6\u3002 \u4e0b\u9762\u6309\u5217\u8868\u6982\u8ff0\u4e86\u6700\u91cd\u8981\u6761\u76ee\u7684\u529f\u80fd\u3002"),(0,a.kt)(i.Z,{mdxType:"CodeHeader"},"TouchGFX Folder"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{}),"\u2502   .mxproject\n\u2502   myproject.ioc\n\u251c\u2500\u2500\u2500Core\n\u251c\u2500\u2500\u2500Drivers\n\u251c\u2500\u2500\u2500EWARM\n\u251c\u2500\u2500\u2500Middlewares\n\u2514\u2500\u2500\u2500TouchGFX\n    \u2502   ApplicationTemplate.touchgfx.part\n    \u251c\u2500\u2500\u2500App\n    \u2502       app_touchgfx.c\n    \u2502       app_touchgfx.h\n    \u2514\u2500\u2500\u2500target\n        \u2502   STM32TouchController.cpp\n        \u2502   STM32TouchController.hpp\n        \u2502   TouchGFXGPIO.cpp\n        \u2502   TouchGFXHAL.cpp\n        \u2502   TouchGFXHAL.hpp\n        \u2502\n        \u2514\u2500\u2500\u2500generated\n                OSWrappers.cpp\n                TouchGFXConfiguration.cpp\n                TouchGFXGeneratedHAL.cpp\n                TouchGFXGeneratedHAL.hpp\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",T({parentName:"tr"},{align:null}),"\u6587\u4ef6\u5939"),(0,a.kt)("th",T({parentName:"tr"},{align:null}),"\u804c\u8d23"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"myproject.ioc"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"STM32CubeMX\u9879\u76ee\u6587\u4ef6")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u5185\u6838"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"main.c"),"\u548c\u542f\u52a8\u4ee3\u7801")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u9a71\u52a8"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"CMSIS\u548cMCU\u7cfb\u5217\u9a71\u52a8\u7a0b\u5e8f")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"EWARM"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"IDE\u9879\u76ee\u6587\u4ef6\u5939\u3002 \u53ef\u4ee5\u4e3aEWARM\u3001MDK-ARM\u6216STM32CubeIDE")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u4e2d\u95f4\u4ef6"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u5305\u542bTouchGFX\u5e93/\u5934\u6587\u4ef6\u4ee5\u53caFreeRTOS\u7b49\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u3002")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"ApplicationTemplate.touchgfx.part"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"STM32CubeMX\u4f7f\u7528\u4e0eTouchGFX Designer\u9879\u76ee\u76f8\u5173\u7684\u4fe1\u606f\uff08\u5982\u5c4f\u5e55\u5c3a\u5bf8\u548c\u4f4d\u6df1\uff09\u6765\u66f4\u65b0.part\u6587\u4ef6")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u5e94\u7528"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"STM32CubeMX\u7684X-CUBE\u63a5\u53e3\u3002 \xa0",(0,a.kt)("inlineCode",{parentName:"td"},"app_touchgfx.c"),"\u6587\u4ef6\u5305\u542b",(0,a.kt)("inlineCode",{parentName:"td"},"MX_TouchGFX_Process(void)"),"\u548c",(0,a.kt)("inlineCode",{parentName:"td"},"MX_TouchGFX_Init(void)"),"\u51fd\u6570\u7684\u5b9a\u4e49\uff0c\u8fd9\u4e9b\u51fd\u6570\u7528\u4e8e\u521d\u59cb\u5316TouchGFX\u548c\u542f\u52a8\u5176\u4e3b\u5faa\u73af\u3002")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u76ee\u6807/\u751f\u6210"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u8be5\u5b50\u6587\u4ef6\u5939\u5305\u542b\u53ea\u8bfb\u6587\u4ef6\uff0c\u5f53\u914d\u7f6e\u66f4\u6539\u65f6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u4f1a\u88abSTM32CubeMX\u8986\u76d6\u3002 ",(0,a.kt)("inlineCode",{parentName:"td"},"TouchGFXGeneratedHAL.cpp"),"\u662fTouchGFX\u7c7b",(0,a.kt)("inlineCode",{parentName:"td"},"HAL"),"\u7684\u5b50\u7c7b\uff0c\u5e76\u5305\u542bSTM32CubeMX\u53ef\u57fa\u4e8e\u5176\u5f53\u524d\u914d\u7f6e\u751f\u6210\u7684\u4ee3\u7801\u3002 ",(0,a.kt)("inlineCode",{parentName:"td"},"OSWrappers.cpp"),"(OSAL) \u5305\u542b\u4e0eTouchGFX Engine\u540c\u6b65\u6240\u9700\u7684\u529f\u80fd\uff0c\u6700\u540e\u662f",(0,a.kt)("inlineCode",{parentName:"td"},"TouchGFXConfiguration.cpp"),"\uff0c\u5176\u5305\u542b\u7528\u4e8e\u6784\u5efa\u548c\u914d\u7f6eTouchGFX\u7684\u4ee3\u7801\uff0c\u5305\u62ecHAL\u3002")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u76ee\u6807"),(0,a.kt)("td",T({parentName:"tr"},{align:null}),"\u5305\u542b\u5927\u91cf\u6587\u4ef6\uff0c\u7528\u6237\u53ef\u4fee\u6539\u8fd9\u4e9b\u6587\u4ef6\uff0c\u4ee5\u6269\u5c55HAL\u884c\u4e3a\uff0c\u6216\u8986\u76d6STM32CubeMX\u751f\u6210\u7684\u914d\u7f6e\u3002 ",(0,a.kt)("inlineCode",{parentName:"td"},"STM32TouchController.cpp"),"\u5305\u542b\u89e6\u6478\u63a7\u5236\u5668\u64cd\u4f5c\u7684\u7a7a\u63a5\u53e3\u3002 ",(0,a.kt)("inlineCode",{parentName:"td"},"TouchGFXHAL.cpp"),"\u5b9a\u4e49",(0,a.kt)("inlineCode",{parentName:"td"},"TouchGFXGeneratedHAL"),"\u7684\u5b50\u7c7b",(0,a.kt)("inlineCode",{parentName:"td"},"TouchGFXHAL"),"\u3002")))),(0,a.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXConfiguration.cpp"),"\u5305\u542b\u4e00\u4e2a\u7528\u4e8e\u6784\u5efaHAL\u7684\u51fd\u6570\u4ee5\u53ca\u4e00\u4e2a\u7528\u4e8e\u542f\u52a8TouchGFX\u4e3b\u5faa\u73af\u7684\u51fd\u6570\u3002 \u53ef\u5728\u53ef\u7f16\u8f91\u7684\u7528\u6237\u7c7b",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXHAL"),"\u4e2d\u5b8c\u6210\u5176\u4ed6\u914d\u7f6e\u3002 HAL\u7684\u4e00\u822c\u67b6\u6784\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/code-architecture.png",noShadow:!0,width:"200",mdxType:"Figure"},"\u751f\u6210\u7684\u4ee3\u7801\u7684\u5c42\u6b21\u7ed3\u6784"),(0,a.kt)("h2",T({},{id:"feature-overview"}),"\u7279\u6027\u6982\u8ff0"),(0,a.kt)("p",null,'Having enabled TouchGFX Generator, three main groups exist in the user interface. A fourth, "Dependencies", will appear if a problem with the current configuration is detected.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"\u4f9d\u8d56\u5173\u7cfb")),"- \u8be5\u7ec4\u5305\u542b\u9488\u5bf9\u5f00\u5173\u4eba\u5458\u7684\u6709\u5173\u914d\u7f6e\u4e2d\u7684\u4f9d\u8d56\u5173\u7cfb\u3001\u8b66\u544a\u6216\u5177\u4f53\u9519\u8bef\u7684\u901a\u77e5\u3002 \u5982\u679c\u6ca1\u6709\u6761\u76ee\uff0c\u5219\u8be5\u7ec4\u5c06\u9690\u85cf\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"\u663e\u793a")),"- \u8be5\u7ec4\u5305\u542b\u4e0e\u663e\u793a\u6709\u5173\u7684\u8bbe\u7f6e\uff0c\u5982\u63a5\u53e3\u3001\u5e27\u7f13\u5b58\u7684\u4f4d\u6df1\u3001\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002 \u8fd9\u4e9b\u8bbe\u7f6e\u76f4\u63a5\u5f71\u54cdTouchGFX\u9879\u76ee\u91cc\u753b\u5e03\u7684\u5927\u5c0f\u4ee5\u53ca\u57fa\u4e8e\u663e\u793a\u90e8\u4ef6\u6240\u751f\u6210\u7684\u4ee3\u7801\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"Driver"))," - This group allows the user to opt-in for a number of ready-made drivers related to the tick source of the application, graphics acceleration (DMA2D and GPU2D) and RTOS. \u7531\u4e8eSTM32CubeMX\u652f\u6301FreeRTOS\uff08CMSIS RTOS v1\u548cv2\uff09\u914d\u7f6e\uff0cTouchGFX Generator\u4e3a\u6bcf\u4e2a\u9009\u9879\u63d0\u4f9b\u4e86\u9a71\u52a8\u7a0b\u5e8f\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"Additional Features"))," - This group appears if RGB565 is selected, allowing the user to create am application using image- and font-data from non-memory mapped flash."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u89c6\u9891\u89e3\u7801")," - \u8be5\u7ec4\u5141\u8bb8\u7528\u6237\u542f\u7528\u786c\u4ef6\u6216\u8f6f\u4ef6\u89c6\u9891\u89e3\u7801\u3002 \u8be5\u9009\u9879\u5bf9\u4e8e\u89c6\u9891\u63a7\u4ef6\u662f\u5fc5\u8981\u7684\u3002 \u6ce8\u610f\uff01\u4e0d\u662f\u6240\u6709\u7684MCU\u90fd\u652f\u6301\u89c6\u9891\u89e3\u7801\u3002")),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/four-sections.png",width:"600",mdxType:"Figure"},"TouchGFX Generator has three groups: Display, Driver and Video Decoding"),(0,a.kt)("h2",T({},{id:"display"}),"\u663e\u793a"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"\u663e\u793a"),"\u7ec4\u5305\u542b\u4e0e\u663e\u793a\u6709\u5173\u7684\u914d\u7f6e\uff0c\u5982\u63a5\u53e3\u3001\u5c3a\u5bf8\u548c\u7f13\u51b2\u7b56\u7565\u3002"),(0,a.kt)("h3",T({},{id:"interface-and-dimensions"}),"\u63a5\u53e3\u4e0e\u5c3a\u5bf8"),(0,a.kt)("p",null,"\u5982\u4eca\uff0cSTM32\u5fae\u63a7\u5236\u5668\u53ef\u4f7f\u7528\u591a\u4e2a\u663e\u793a\u63a5\u53e3\uff0c\u5982\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5e76\u884cRGB\uff08LTDC\uff09"),(0,a.kt)("li",{parentName:"ul"},"MIPI DSI"),(0,a.kt)("li",{parentName:"ul"},"FMC"),(0,a.kt)("li",{parentName:"ul"},"SPI")),(0,a.kt)("p",null,"\u5982\u679cMCU\u5e26\u6709\u8fde\u63a5\u5230LTDC\u6216FMC\u7684\u663e\u793a\u5668\uff0c",(0,a.kt)("em",{parentName:"p"},"TouchGFX Generator"),"\u53ef\u751f\u6210\u4ee3\u7801\uff0c\u4ee5\u5c06\u5e27\u7f13\u51b2\u5668\u4f20\u8f93\u5230\u8fde\u63a5\u7684\u663e\u793a\u5668\u3002 \u5bf9\u4e8eDSI\u548cSPI\u63a5\u53e3\uff0c\u9a71\u52a8\u7a0b\u5e8f\u5fc5\u987b\u7531\u5f00\u53d1\u4eba\u5458\u81ea\u5df1\u5b9e\u73b0\u3002"),(0,a.kt)(l.Z,{mdxType:"FurtherReading"},"\u6709\u5173\u4e0d\u540c\u663e\u793a\u63a5\u53e3\u7684\u4ee3\u7801\u5177\u4f53\u4f8b\u7a0b\uff0c\u8bf7\u53c2\u89c1",(0,a.kt)(p.Z,{to:"scenarios/scenarios-ltdc-parallel-rgb",mdxType:"Link"},"\u65b9\u6848"),"\u7ae0\u8282\u3002"),(0,a.kt)("h3",T({},{id:"framebuffer-pixel-format"}),"\u5e27\u7f13\u51b2\u50cf\u7d20\u683c\u5f0f"),(0,a.kt)("p",null,"TouchGFX Generator\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u5e27\u7f13\u51b2\u50cf\u7d20\u683c\u5f0f\u3002 \u5f53\u4f7f\u7528\u201cCustom\u201d\u663e\u793a\u63a5\u53e3\u65f6\uff0c\u6240\u6709\u9009\u9879\u5747\u53ef\u7528\uff0c\u5426\u5219\u9009\u9879\u88ab\u9650\u5236\u4e3a\u663e\u793a\u63a7\u5236\u5668\u8bbe\u7f6e\uff08\u4f8b\u5982\uff0c\u914d\u7f6eLTDC Framebuffer\u683c\u5f0f\u4e3a\u201cRGB565\u201d\u65f6\uff0c\u4f1a\u5c06TouchGFX Generator\u4e2d\u7684\u914d\u7f6e\u9009\u9879\u9650\u5236\u4e3a\u201cRGB565\u201d\uff09\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"BW (1bpp)"),(0,a.kt)("li",{parentName:"ol"},"Grey2 (2bpp)"),(0,a.kt)("li",{parentName:"ol"},"Grey4 (4bpp)"),(0,a.kt)("li",{parentName:"ol"},"ABRG2222 (8bpp)"),(0,a.kt)("li",{parentName:"ol"},"ARGB2222 (8bpp)"),(0,a.kt)("li",{parentName:"ol"},"BGRA2222 (8bpp)"),(0,a.kt)("li",{parentName:"ol"},"RGBA2222 (8bpp)"),(0,a.kt)("li",{parentName:"ol"},"RGB565 (16bpp)"),(0,a.kt)("li",{parentName:"ol"},"RGB888 (24bpp)"),(0,a.kt)("li",{parentName:"ol"},"ARGB8888 (32bpp)"),(0,a.kt)("li",{parentName:"ol"},"XRGB8888 (32bpp)")),(0,a.kt)(o.Z,{mdxType:"Note"},"\u4e00\u4e9b\u50cf\u7d20\u683c\u5f0f\u6ca1\u6709\u6216\u4ec5\u6709\u90e8\u5206ChromART\uff08DMA2D\uff09\u652f\u6301\u3002"),(0,a.kt)(u.Z,{mdxType:"Caution"},(0,a.kt)("b",null,"For STM32F7/H7"),": If the framebuffer is placed in Write Through cached memory (e.g. SRAM) then the DCache is flushed by the generated code prior to DMA2D (if configured in the Generator) accessing it. \u8bb0\u4f4f\u8981\u5728STM32CubeMX\u4e2d\u7684",(0,a.kt)("b",null,"Cortex M7"),"\u7684",(0,a.kt)("b",null,"System Core"),"\u8bbe\u7f6e\u4e2d\u542f\u7528",(0,a.kt)("b",null,"CPU Cache"),"\uff0c\u8fd9\u6837\u7f13\u5b58\u673a\u5236\u624d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002"),(0,a.kt)(l.Z,{mdxType:"FurtherReading"},"\u5982\u9700\u66f4\u591a\u5173\u4e8eCPU\u7f13\u5b58\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605",(0,a.kt)(p.Z,{to:"../board-bring-up/how-to/02-cpu-running#cache-on-f7-and-h7",mdxType:"Link"},"F7\u548cH7"),"\u4e2d\u7684\u201cCache\uff08\u7f13\u5b58\uff09\u201d\u7ae0\u8282\u3002"),(0,a.kt)("h3",T({},{id:"buffering-strategies"}),"\u7f13\u51b2\u7b56\u7565"),(0,a.kt)("p",null,"\u53ef\u901a\u8fc7TouchGFX Generator\u914d\u7f6e\u4ee5\u4e0b\u5e27\u7f13\u51b2\u7b56\u7565\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5355\u5e27\u7f13\u51b2")," - \u4ec5\u4f7f\u7528\u4e00\u4e2a\u5e94\u7528\u5e27\u7f13\u51b2\u533a\u3002 \u53ef\u80fd\u4f1a\u4f7f\u6027\u80fd\u53d7\u9650\uff0c\u4f46\u5360\u7528\u5185\u5b58\u66f4\u5c11\u3002 \u53ef\u4e0e\u201c\u7f13\u51b2\u4f4d\u7f6e\u201d\u914d\u7f6e\u4e00\u8d77\u4f7f\u7528\uff0c\u5c06\u5176\u653e\u7f6e\u5728\u5185\u90e8RAM\u4e2d\u3002 \u4e3a\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u7528\u6237\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u8fd4\u56de\u663e\u793a\u63a7\u5236\u5668\u6b63\u5728\u5904\u7406\u7684\u5f53\u524d\u884c\u3002 \u8be5\u65b9\u6cd5\u7528\u4e8e\u6846\u67b6\uff0c\u4ee5\u5141\u8bb8\u66f4\u65b0\u8be5\u5e27\u671f\u95f4\u5df2\u4f20\u8f93\u5230\u663e\u793a\u5c4f\u7684\u5185\u5b58\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u53cc\u7f13\u51b2")," - \u4f7f\u7528\u4e24\u4e2a\u5e27\u7f13\u51b2\u533a\u3002 \u901a\u5e38\u4ee5\u727a\u7272\u5185\u5b58\u4e3a\u4ee3\u4ef7\u6765\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u90e8\u5206\u7f13\u51b2"),"- \u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u7528\u6237\u5b9a\u4e49\u7684\u5185\u5b58\u5757\u4f5c\u4e3a\u5e27\u7f13\u51b2\u533a\u3002 \u8be5\u7b56\u7565\u9002\u7528\u4e8e\u4f4e\u6210\u672c\u89e3\u51b3\u65b9\u6848\uff0c\u5b83\u4e0d\u4f9d\u8d56\u5916\u90e8RAM\u4f46\u53ef\u4ee5\u5b9e\u73b0\u8d85\u51fa\u53ef\u7528\u5185\u5b58\u7684\u5168\u5e27\u7f13\u51b2\u80fd\u529b\u3002")),(0,a.kt)("p",null,"\u5bf9\u4e8e\u5355\u7f13\u51b2\u533a\u548c\u53cc\u7f13\u51b2\u533a\uff0c\u7528\u6237\u53ef\u901a\u8fc7\u201c\u7f13\u51b2\u5668\u4f4d\u7f6e\u201d\u6765\u914d\u7f6e\u5176\u4f4d\u7f6e\uff0c\u8be5\u914d\u7f6e\u63d0\u4f9b\u4ee5\u4e0b\u9009\u9879\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u6309\u5206\u914d"),"- \u5141\u8bb8\u94fe\u63a5\u5668\u6839\u636e\u94fe\u63a5\u5668\u811a\u672c\u6765\u653e\u7f6e\u5e27\u7f13\u51b2\u5b58\u50a8\u5668\u3002 \u9ed8\u8ba4\u4f4d\u4e8e\u5185\u90e8RAM\u4e2d\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u6309\u5730\u5740"),"- \u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u4e00\u4e2a(\u5355) \u6216\u4e24\u4e2a(\u53cc) \u5e27\u7f13\u51b2\u5730\u5740\u3002")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u90e8\u5206\u5e27\u7f13\u51b2"),"\u7b56\u7565\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u4ee5\u4e0b\u53c2\u6570:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5757\u6570\uff08\u59cb\u7ec8\u653e\u7f6e\u5728\u5185\u90e8RAM\u4e2d\uff09"),(0,a.kt)("li",{parentName:"ul"},"\u5757\u5927\u5c0f\uff08\u5b57\u8282\uff09")),(0,a.kt)("p",null,"\u8981\u4e86\u89e3\u6709\u5173\u90e8\u5206\u7f13\u51b2\u6218\u7565\u7684\u4e00\u4e9b\u6838\u5fc3\u6982\u5ff5\uff0c\u8bf7\u9605\u8bfb\u4f7f\u7528\u90e8\u5206\u5e27\u7f13\u51b2\u533a\u964d\u4f4e\u5185\u5b58\u8981\u6c42\u7684",(0,a.kt)("a",T({parentName:"p"},{href:"../scenarios/lowering-memory-usage-with-partial-framebuffer"}),"\u4e13\u7528\u6587\u7ae0"),"\u3002 \u672c\u6587\u4ece\u6982\u5ff5\u4e0a\u8bf4\u660e\u4e86\u5982\u4f55\u5b9e\u73b0\u90e8\u5206\u5e27\u7f13\u51b2\uff0c\u5e76\u4e14\u672c\u6587\u4e2d\u663e\u793a\u7684\u4ee3\u7801\u4e0eTouchGFX Generator\u751f\u6210\u7684\u4ee3\u7801\u7565\u6709\u4e0d\u540c\u3002 \u6709\u5173\u4e3a\u8fd9\u4e9b\u7b56\u7565\u751f\u6210\u7684\u5177\u4f53\u793a\u4f8b\u4ee3\u7801\uff0c\u8bf7\u53c2\u89c1",(0,a.kt)("a",T({parentName:"p"},{href:"scenarios/scenarios-framebuffer-strategies"}),"\u5e27\u7f13\u51b2\u7b56\u7565"),"\u3002"),(0,a.kt)("h2",T({},{id:"driver"}),"\u9a71\u52a8\u5668"),(0,a.kt)("p",null,"\u9a71\u52a8\u5668\u90e8\u5206\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u4e3aTouchGFX AL\u7684\u5404\u79cd\u529f\u80fd\u9009\u62e9\u9a71\u52a8\u7a0b\u5e8f\u3002"),(0,a.kt)("h3",T({},{id:"application-tick-source"}),"\u5e94\u7528\u6ef4\u7b54\u8ba1\u65f6\u6e90"),(0,a.kt)("p",null,"\u6ef4\u7b54\u8ba1\u65f6\u6e90\u5b9a\u4e49\u4e86\u5982\u4f55\u5c55\u5f00\u9a71\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u3002 \u5f00\u53d1\u4eba\u5458\u5177\u6709\u4ee5\u4e0b\u9009\u9879\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"LTDC"),"-\u5982\u679c\u5728\u201cDisplay\u201d\u7ec4\u4e2d\u9009\u7528LTDC\u63a5\u53e3\uff0c\u5219\u5e94\u7528Tick\u6e90\u53ef\u4ee5\u9009\u201cLTDC\u201d\u3002 \u8fd9\u610f\u5473\u7740TouchGFX Generator\u5c06\u5728",(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFXGenerated HAL"),"\u7c7b\u4e2d\u5b89\u88c5\u9a71\u52a8\u7a0b\u5e8f\u51fd\u6570(LTDC\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f) \uff0c\u8be5\u51fd\u6570\u901a\u8fc7\u8c03\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"OSWrappers::signalVSync()"),"\u6765\u5c55\u5f00\u9a71\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Custom\u548cFMC")," - \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f00\u53d1\u4eba\u5458\u9700\u8981\u901a\u8fc7\u5468\u671f\u6027\u8c03\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"OSWrappers::signalVSync()"),"\u6765\u9a71\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u6267\u884c\u3002")),(0,a.kt)("h3",T({},{id:"graphics-accelerator"}),"\u56fe\u5f62\u52a0\u901f\u5668"),(0,a.kt)("p",null,"\u5bf9\u4e8e\u56fe\u5f62\u52a0\u901f\uff0c\u5f00\u53d1\u4eba\u5458\u6709\u4e09\u4e2a\u9009\u9879\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"None")," - The application renders using only the CPU."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"DMA2D Accelerator (ChromART)")," -\xa0The application uses the ChromART chip when possible to move and blend pixels, freeing up CPU cycles. The driver is generated by TouchGFX Generator and does not require any action from the developer.")),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-dma2d.png",width:"200",mdxType:"Figure"},"DMA2D is enabled in the *Multimedia* category in CubeMX, for MCUS that support it."),"1. \u4f7f\u7528STM32Cube HAL\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5176\u5c06\u56de\u8c03\u51fd\u6570\u6ce8\u518c\u5230dma2d\u53e5\u67c4`hdma2d.XferCpltCallback`\u3002 2. \u76f4\u63a5\u4f7f\u7528`DMA2D_IRQHandler()`\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002",(0,a.kt)("p",null,"\u901a\u8fc7\u5728STM32CubeMX\u4e2dDMA2D IP\u7684NVIC\u8bbe\u7f6e\u4e2d\u542f\u7528\u6216\u7981\u7528DMA2D\u5168\u5c40\u4e2d\u65ad\uff0c\u53ef\u4ee5\u5728\u8fd9\u4e24\u8005\u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u3002 \u9009\u98791\uff09\u542f\u7528\u5168\u5c40\u4e2d\u65ad\u751f\u6210\u7684\u4ee3\u7801\uff0c\u9009\u98792\uff09\u7981\u7528\u5168\u5c40\u4e2d\u65ad\u751f\u6210\u7684\u4ee3\u7801\u3002"),(0,a.kt)(o.Z,{mdxType:"Note"},(0,a.kt)("li",null,'When using global interrupt for DMA2D, ensure that the "IRQ handler" calls the "DMA2D HAL handler". This is default behaviour.'),(0,a.kt)("li",null,"\u5982\u679c\u5728\u542f\u7528\u5168\u5c40\u4e2d\u65ad\u7684\u540c\u65f6\u7981\u7528DMA2D\u7684\u201c IRQ\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u201d\u548c\u201c\u8c03\u7528HAL\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u201d\uff0c\u5c06\u5bfc\u81f4\u6c38\u4e0d\u8c03\u7528\u5df2\u6ce8\u518c\u7684\u56de\u8c03\u3002")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"GPU2D (NeoChrom)")," is a graphics accelerator capable of accelerating many of the drawing operations in TouchGFX, including texture mapping. It supports framebuffers in RGB565, RGB888, and ARGB8888 formats.")),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/multimedia-group-gpu2d.png",width:"190",mdxType:"Figure"},"GPU2D is enabled in the *Multimedia* category in CubeMX, for MCUS that support it."),(0,a.kt)(u.Z,{mdxType:"Caution"},"The GPU2D option is only visible if GPU2D has been enabled in the ",(0,a.kt)("i",null,"Multimedia")," section for your project in CubeMX. It is only available for STM32U599 devices and can only be enabled for use with TouchGFX if the ThreadX RTOS from the ",(0,a.kt)("i",null,"Middlewares")," section is also enabled."),(0,a.kt)("h3",T({},{id:"real-time-operating-system"}),"\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf"),(0,a.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u53ef\u4f7f\u7528\u4efb\u4f55\u652f\u6301TouchGFX\u7684RTOS\uff08\u751a\u81f3\u65e0\u64cd\u4f5c\u7cfb\u7edf\uff09\u3002 \u5982\u62bd\u8c61\u5c42\u67b6\u6784\u4e2d\u6240\u8ff0\uff0cTouchGFX Engine\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"OSWrappers"),"\u63a5\u53e3\u5c06\u5176\u4e3b\u4e8b\u4ef6\u5faa\u73af\u4ee5\u53ca\u5e27\u7f13\u51b2\u8bbf\u95ee\u4e0e\u7528\u6237\u9009\u62e9\u7684RTOS\u540c\u6b65\u3002 When developers choose an operating system in TouchGFX Generator, code will be generated to syncronize internally via primitives for the OS of choice. \u64cd\u4f5c\u7cfb\u7edf\u4ecd\u7136\u5fc5\u987b\u901a\u8fc7STM32CubeMX\u8fdb\u884c\u914d\u7f6e\uff0c\u4ee5\u786e\u5b9a\u5806\u6808\u5927\u5c0f\u7b49\u3002"),(0,a.kt)("p",null,"FreeRTOS (CMSIS OS V1 and V2) and ThreadX (Native Middleware or Azure RTOS Software Packs) can be configured directly from within STM32CubeMX and TouchGFX Generator providing the user with generated code for both task definitions and TouchGFX RTOS driver. TouchGFX Generator can generate CMSIS V1 and CMSIS V2 compliant RTOS drivers which work with any CMSIS compliant RTOS, a driver for ThreadX, and a driver for running bare metal without an operating system."),(0,a.kt)("h4",T({},{id:"threadx-middleware-os"}),"ThreadX"),(0,a.kt)("p",null,"ThreadX can be enabled either by selecting an AZRTOS Software Pack or by enabling the Native ThreadX Middleware from STM32CubeMX, if available for the selected MCU device."),(0,a.kt)(o.Z,{mdxType:"Note"},(0,a.kt)("li",null,"All new STM32 MCU devices will support, by default, ThreadX Middleware directly available from STM32CubeMX without requiring additional pack downloads. TouchGFX Board Support packs will slowly transition to using either ThreadX middleware, where available, or X-CUBE-AZRTOS software packs."),(0,a.kt)("li",null,"X-CUBE-AZRTOS-XX Expansion Packs providing ThreadX support are already available for the ",(0,a.kt)("i",null,"STM32G0xx, STM32G4xx, STM32L4xx, STM32F4xx, STM32F7xx")," and the ",(0,a.kt)("i",null,"STM32H7xx")," MCU Series.")),(0,a.kt)("p",null,"\u4e0b\u56fe\u663e\u793a\u4e86TouchGFX Generator\u4e2d\u53ef\u7528\u7684\u9009\u9879\u3002"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/driver-rtos-options-threadx.png",mdxType:"Figure"},"RTOS\u9a71\u52a8\u7a0b\u5e8f\u9009\u9879"),(0,a.kt)(o.Z,{mdxType:"Note"},(0,a.kt)("li",null,(0,a.kt)("b",null,(0,a.kt)("i",null,"NoOS"))," option is disabled when ",(0,a.kt)("b",null,"ThreadX")," Middleware is enabled."),(0,a.kt)("li",null,(0,a.kt)("b",null,(0,a.kt)("i",null,"CMSIS_RTOS_V1"))," and ",(0,a.kt)("b",null,(0,a.kt)("i",null,"CMSIS_RTOS_V2"))," options are disabled when ",(0,a.kt)("b",null,"ThreadX")," Middleware is enabled. CMSIS OS wrapper is not provided by ST, customer has to select ",(0,a.kt)("b",null,(0,a.kt)("i",null,"Custom"))," option and implement the CMSIS wrapper.")),(0,a.kt)("h5",T({},{id:"enabling-and-configuring-threadx-from-the-middleware-list-available-in-stm32cubemx"}),"Enabling and configuring ThreadX from the Middleware list available in STM32CubeMX"),(0,a.kt)("p",null,"A succesful memory configuration for ThreadX relies on ",(0,a.kt)("i",null,"Memory Pool Allocation"),". The recommended value is ",(0,a.kt)("i",null,"Static Allocation"),". Perform the folowing steps in the ThreadX Middleware configuration:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Enable ",(0,a.kt)("inlineCode",{parentName:"li"},"THREADX")," Middleware by selecting ",(0,a.kt)("inlineCode",{parentName:"li"},"Core")," from the Mode list, as seen in the figure below."),(0,a.kt)("li",{parentName:"ul"},"Set ",(0,a.kt)("inlineCode",{parentName:"li"},"TX_TIMER_TICKS_PER_SECOND")," to ",(0,a.kt)("strong",{parentName:"li"},"1000")," to get Ticks each one millisecond"),(0,a.kt)("li",{parentName:"ul"},"Set ",(0,a.kt)("inlineCode",{parentName:"li"},"Memory Pool Allocation")," to ",(0,a.kt)("strong",{parentName:"li"},"Use Static Allocation"))),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/enable-and-configure-native-threadx-mw.png",mdxType:"Figure"},"Enabling and Configuring Native ThreadX Middleware"),(0,a.kt)(u.Z,{mdxType:"Caution"},(0,a.kt)("li",null,(0,a.kt)("b",null,"Memory Pool Allocation")," should be set to ",(0,a.kt)("b",null,"Use Dynamic Allocation")," when ",(0,a.kt)("b",null,"Native ThreadX Middleware")," is enabled"),(0,a.kt)("ul",null,(0,a.kt)("li",null,"When ",(0,a.kt)("b",null,"Memory Pool Allocation")," is set to ",(0,a.kt)("b",null,"Use Dynamic Allocation")),(0,a.kt)("ul",null,(0,a.kt)("li",null,"User will have to add the missing code in the ",(0,a.kt)("i",null,"USER CODE BEGIN DYNAMIC_MEM_ALLOC")," section in the generated ",(0,a.kt)("b",null,(0,a.kt)("i",null,"app_azure_rtos.c"))," file."),(0,a.kt)("li",null,"User will need also to update the linker files following the recemmendation described in the generated ",(0,a.kt)("b",null,(0,a.kt)("i",null,"app_azure_rtos.c"))," file.")))),(0,a.kt)("h5",T({},{id:"enabling-and-configuring-threadx-from-azrtos-software-pack"}),"Enabling and configuring ThreadX from AZRTOS Software Pack"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Select ",(0,a.kt)("strong",{parentName:"li"},"Software Packs -> Select Components")," or Press ",(0,a.kt)("inlineCode",{parentName:"li"},"Alt-O"),"."),(0,a.kt)("li",{parentName:"ul"},"Select ",(0,a.kt)("strong",{parentName:"li"},"STMicroelectonics.X-CUBE-AZRTOS-XX"),". Download the pack if required."),(0,a.kt)("li",{parentName:"ul"},"Select ",(0,a.kt)("strong",{parentName:"li"},"RTOS ThreadX")," and check the ",(0,a.kt)("strong",{parentName:"li"},"Core")," check box to enable ThreadX. You can now safely close the ",(0,a.kt)("i",null,"Software Packs Component Selector"),".")),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos.png",mdxType:"Figure"},"Enabling ThreadX from an X-CUBE-AZRTOS Software Pack"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Select the ",(0,a.kt)("i",null,"Software Packs")," group from the ",(0,a.kt)("i",null,"Categories")," list on the left hand side and select ",(0,a.kt)("strong",{parentName:"li"},"STMicroelectonics.X-CUBE-AZRTOS-XX")),(0,a.kt)("li",{parentName:"ul"},"Enable ThreadX by selecting the mode ",(0,a.kt)("strong",{parentName:"li"},"RTOS ThreadX")),(0,a.kt)("li",{parentName:"ul"},"Set ",(0,a.kt)("inlineCode",{parentName:"li"},"Memory Pool Allocation")," to ",(0,a.kt)("strong",{parentName:"li"},"Use Static Allocation"))),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config1.png",width:"800",mdxType:"Figure"},"ThreadX Configuration - X-CUBE-AZRTOS Software Pack"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Set ",(0,a.kt)("inlineCode",{parentName:"li"},"TX_TIMER_TICKS_PER_SECOND")," to ",(0,a.kt)("strong",{parentName:"li"},"1000")," to get ticks once per millisecond.")),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/x-cube-azurertos-config2.png",width:"800",mdxType:"Figure"},"ThreadX Configuration - X-CUBE-AZRTOS Software Pack"),(0,a.kt)("h4",T({},{id:"freertos-middleware-os"}),"FreeRTOS"),(0,a.kt)("p",null,"\u8c03\u7528\u4ee5\u4e0b\u51fd\u6570\u65f6\uff0c\u5c06\u8fdb\u5165TouchGFX\u4e3b\u5faa\u73af\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp"}),"void\xa0MX_TouchGFX_Process(void);\n")),(0,a.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u9700\u8981\u5728\u4efb\u52a1\u5904\u7406\u7a0b\u5e8f\u4e2d\u4e3a\u8981\u5728\u5176\u4e2d\u8fd0\u884cTouchGFX\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u52a1\u8c03\u7528\u6b64\u51fd\u6570\u3002 \u5982\u679c\u7528\u6237\u4eceSTM32CubeMX\u914d\u7f6e\u4e86\u540d\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"DefaultTask"),"\u7684FeeRTOS\u4efb\u52a1\uff0c\u5219\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u4e86\u5982\u4f55\u5728\u7528\u6237\u4ee3\u7801\u4e2d\uff0c\u901a\u8fc7\u4efb\u52a1\u5904\u7406\u51fd\u6570\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Process() "),"\u51fd\u6570\u6765\u542f\u52a8TouchGFX\u4efb\u52a1\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp",metastring:"{4}","{4}":!0}),"void\xa0StartDefaultTask(void\xa0*argument)\n{\n\xa0\xa0/*\xa0USER\xa0CODE\xa0BEGIN\xa05\xa0*/\n  MX_TouchGFX_Process();\n\xa0\xa0/*\xa0USER\xa0CODE\xa0END\xa05\xa0*/\xa0\n}\n")),(0,a.kt)("p",null,"STM32CubeMX will also generate a call to ",(0,a.kt)("inlineCode",{parentName:"p"},"osKernelStart();")," which starts the scheduler."),(0,a.kt)("h4",T({},{id:"threadx-middleware-os"}),"ThreadX Middleware"),(0,a.kt)("p",null,"STM32CubeMX is no more responsible of generating the code creating the threads for middlewares and for the user.",(0,a.kt)("br",null)," STM32CubeMX will generate the call to the ",(0,a.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_PreOSInit()")," function which will initialize the TouchGFX framework",(0,a.kt)("br",null)," STM32CubeMX will generate the call to the ",(0,a.kt)("inlineCode",{parentName:"p"},"MX_ThreadX_Init()()")," function which will initialize and start the ThreadX kernel"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp",metastring:"{4,9}","{4,9}":!0}),"int main(void)\n{\n  /* Call PreOsInit function */\n    MX_TouchGFX_PreOSInit();\n  /* USER CODE BEGIN 2 */\n\n  /* USER CODE END 2 */\n\n  MX_ThreadX_Init();\n}\n")),(0,a.kt)("p",null,"TouchGFX Generator will generate the ",(0,a.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_PreOSInit()")," function which will simply call the ",(0,a.kt)("inlineCode",{parentName:"p"},"touchgfx_init()")),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp",metastring:"{7}","{7}":!0}),"/**\n * PreOS Initialization function\n */\nvoid MX_TouchGFX_PreOSInit(void)\n{\n  // Calling forward to touchgfx_init in C++ domain\n  touchgfx_init();\n}\n")),(0,a.kt)("p",null,"TouchGFX Generator will generate the ",(0,a.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Init()")," function which will create the TouchGFX thread"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp",metastring:"{16-23}","{16-23}":!0}),'/**\n * Create TouchGFX Thread\n */\nUINT MX_TouchGFX_Init(VOID *memory_ptr)\n{\n  UINT ret = TX_SUCCESS;\n  CHAR *pointer = 0;\n\n  /* Allocate the stack for TouchGFX Thread.  */\n  if (tx_byte_allocate((TX_BYTE_POOL*)memory_ptr, (VOID **) &pointer,\n                       TOUCHGFX_STACK_SIZE, TX_NO_WAIT) != TX_SUCCESS)\n  {\n    ret = TX_POOL_ERROR;\n  }\n\n  /* Create TouchGFX Thread */\n  else if (tx_thread_create(&TouchGFXThread, (CHAR *)"TouchGFX", TouchGFX_Task, 0,\n                       pointer, TOUCHGFX_STACK_SIZE,\n                       5, 5,\n                       TX_NO_TIME_SLICE, TX_AUTO_START) != TX_SUCCESS)\n  {\n    ret = TX_THREAD_ERROR;\n  }\n\n  return ret;\n}\n')),(0,a.kt)("p",null,"TouchGFX Generator will generate the required code which will be inserted by STM32CubeMX into the file ",(0,a.kt)("b",null,(0,a.kt)("i",null,"app_azure_rtos.c"))),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp",metastring:"{10,23}","{10,23}":!0}),'  /**\n  * @brief  Define the initial system.\n  * @param  first_unused_memory : Pointer to the first unused memory\n  * @retval None\n  */\nVOID tx_application_define(VOID *first_unused_memory)\n{\n  ...\n\n  if (tx_byte_pool_create(&touchgfx_app_byte_pool, "TouchGFX App memory pool", touchgfx_byte_pool_buffer, TOUCHGFX_APP_MEM_POOL_SIZE) != TX_SUCCESS)\n  {\n    /* USER CODE BEGIN TouchGFX_Byte_Pool_Error */\n\n    /* USER CODE END TouchGFX_Byte_Pool_Error */\n  }\n  else\n  {\n    /* USER CODE BEGIN TouchGFX_Byte_Pool_Success */\n\n    /* USER CODE END TouchGFX_Byte_Pool_Success */\n\n    memory_ptr = (VOID *)&touchgfx_app_byte_pool;\n    if (MX_TouchGFX_Init(memory_ptr) != TX_SUCCESS)\n    {\n      /* USER CODE BEGIN  MX_X-CUBE-TOUCHGFX_Init_Error */\n      while(1);\n      /* USER CODE END  MX_X-CUBE-TOUCHGFX_Init_Error */\n    }\n    /* USER CODE BEGIN  MX_X-CUBE-TOUCHGFX_Init_Success */\n\n    /* USER CODE END  MX_X-CUBE-TOUCHGFX_Init_Success */\n  }\n\n  ...\n}\n')),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"tx_application_define()")," function is called by the ThreadX kernel at initialization time.",(0,a.kt)("br",null)," The ",(0,a.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Init()")," function is called by ",(0,a.kt)("inlineCode",{parentName:"p"},"tx_application_define()"),".",(0,a.kt)("br",null)," The TouchGFX thread will be started later when the ThreadX kernel is started."),(0,a.kt)(o.Z,{mdxType:"Note"},(0,a.kt)("li",null,"STM32CubeMX generate full code only the ",(0,a.kt)("b",null,"Static Memory Pool Allocation")," configuration for the ",(0,a.kt)("b",null,"ThreadX Middlewares"),"."),(0,a.kt)("li",null,"Please refer to the ",(0,a.kt)("i",null,"STM32H7B3I-DK/Applications/AnimatedImages")," example available inside the ",(0,a.kt)("b",null,"X-CUBE-TOUCHGFX")," expansion pack if you want to configure ThreadX with ",(0,a.kt)("b",null,"Dynamic Memory Allocation"))),(0,a.kt)("h4",T({},{id:"other-cmsis-compliant-os"}),"\u5176\u4ed6\u517c\u5bb9CMSIS\u7684OS"),(0,a.kt)("p",null,"\u5f53\u5f00\u53d1\u4eba\u5458\u91c7\u7528\u4e0eSTM32CubeMX\u63d0\u4f9b\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08FreeRTOS\u548cThreadX\uff09\u4e0d\u540c\u7684\uff0c\u517c\u5bb9CMSIS\u7684\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u65f6\uff0c\u4ed6\u5fc5\u987b\u624b\u52a8\u5b8c\u6210RTOS\u914d\u7f6e\u548c\u4efb\u52a1\u5b9a\u4e49\u3002 \u901a\u5e38\uff0c\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u624b\u52a8\u6b65\u9aa4\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u914d\u7f6eRTOS"),(0,a.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u4efb\u52a1\u4ee5\u8fd0\u884cTouchGFX (",(0,a.kt)("inlineCode",{parentName:"li"},"MX_TouchGFX_Process"),")"),(0,a.kt)("li",{parentName:"ol"},"\u542f\u52a8\u8c03\u5ea6\u5668")),(0,a.kt)("p",null,"\u8c03\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"MX_TouchGFX_Process"),"\uff0c\u4ee5\u542f\u52a8\u4efb\u52a1\u5904\u7406\u7a0b\u5e8f\u4e2d\u7684TouchGFX Engine\u4e3b\u5faa\u73af\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp"}),"void\xa0MX_TouchGFX_Process(void);\n")),(0,a.kt)("h3",T({},{id:"additional-features"}),"\u5176\u5b83\u529f\u80fd"),(0,a.kt)("h4",T({},{id:"external-data-reader"}),"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668"),(0,a.kt)("p",null,"\u5bf9\u4e8eRGB565\u5e27\u7f13\u51b2\u50cf\u7d20\u683c\u5f0f\uff0ctouchgfx\u652f\u6301\u6240\u8c13\u7684",(0,a.kt)("em",{parentName:"p"},"\u6570\u636e\u8bfb\u53d6\u5668"),"\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u4f7f\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u76f4\u63a5\u4ece\u975e\u5b58\u50a8\u5668\u6620\u5c04\u4e32\u884c\u95ea\u5b58\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u65e0\u9700\u8fdb\u884c",(0,a.kt)("a",T({parentName:"p"},{href:"../ui-development/touchgfx-engine-features/caching-bitmaps"}),"\u7f13\u5b58"),"\uff0c\u5f53\u7136\u8fd9\u9700\u8981\u589e\u52a0\u989d\u5916\u7684\u7f13\u51b2\u5b58\u50a8\u533a\u3002 \u6709\u5173\u5982\u4f55\u5b9e\u73b0DataReader\uff0c\u4ece\u975e\u5b58\u50a8\u6620\u5c04\u95ea\u5b58\u82af\u7247\u4e2d\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f\u8d44\u6e90\u7684\u793a\u4f8b\uff0c\u8bf7\u53c2\u89c1",(0,a.kt)("a",T({parentName:"p"},{href:"../scenarios/using-serial-flash"}),"SerialFlash"),"\u6587\u7ae0\u3002"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"\u6570\u636e\u8bfb\u53d6\u5668"),"\u9009\u9879\u901a\u5e38\u7528\u4e8e\u6ca1\u6709\u8db3\u591f\u7684\u5185\u5b58\u7528\u4e8e\u989d\u5916\u7f13\u51b2\u533a\u7684\u4f4e\u6210\u672c\u89e3\u51b3\u65b9\u6848(\u5982STM32G0) \u3002 \u5982\u679cDMA2D\u4f7f\u80fd\u4e86\uff0c\u5219\u65e0\u6cd5\u4f7f\u80fd\u8be5\u9009\u9879\u3002"),(0,a.kt)("p",null,"\u4e00\u65e6",(0,a.kt)("em",{parentName:"p"},"RGB565"),"\u9009\u4f5c\u5e27\u7f13\u51b2\u50cf\u7d20\u683c\u5f0f\u540e\uff0c",(0,a.kt)("em",{parentName:"p"},"\u9644\u52a0\u529f\u80fd"),"\u7ec4\u5c06\u53d8\u5f97\u53ef\u7528\u3002"),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/additional-features-data-reader.png",width:"520",noShadow:!0,mdxType:"Figure"},"\u5176\u5b83\u529f\u80fd\uff1a\u6570\u636e\u8bfb\u53d6\u5668"),(0,a.kt)("p",null,"\u5f00\u53d1\u4eba\u5458\u53ef\u8fdb\u884c\u4ee5\u4e0b\u914d\u7f6e\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668\uff1a"),"\u4f7f\u80fd\u6216\u7981\u7528\u529f\u80fd\u3002 \u5982\u679c\u4f7f\u80fd\uff0cTouchGFX\u5c06\u76f4\u63a5\u901a\u8fc7\u751f\u6210\u7684\u63a5\u53e3\u68c0\u7d22\u5e94\u7528\u8d44\u6e90\u3002 \u5982\u679c\u7981\u7528\uff0c\u5219\u5f00\u53d1\u4eba\u5458\u9700\u8981\u5c06\u56fe\u7247\u8d44\u6e90",(0,a.kt)("em",{parentName:"li"},"\u7f13\u5b58"),"\u5230\u5185\u5b58\u7f13\u51b2\u533a\u4e2d\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668\uff1a\u884c\u7f13\u51b2\u533a\u5927\u5c0f\uff1a"),"\u521b\u5efa\u4e24\u4e2a\u7f13\u51b2\u533a\uff0c\u4ee5\u4fbf\u5c06\u56fe\u50cf\u6216\u6587\u672c\u6df7\u5408\u5230\u5e27\u7f13\u51b2\u4e2d\u3002 \u9ed8\u8ba4\u503c\u4e3a\u4e00\u4e2a\u5c4f\u5e55\u5bbd\u5ea6*4\u5b57\u8282\uff0c\u4ee5\u652f\u6301ARGB8888\u50cf\u7d20\u683c\u5f0f\u7684\u5168\u5c3a\u5bf8\u56fe\u50cf\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668\uff1a\u6700\u5c0fDMA\u4f20\u8f93\u5927\u5c0f\uff1a"),"\u8bbe\u7f6e\u542f\u52a8DMA\u4f20\u8f93\u6240\u9700\u7684\u6700\u5c0f\u5b57\u8282\u3002 \u5982\u679c\u8bf7\u6c42\u4f20\u8f93\u7684\u5b57\u8282\u66f4\u5c11\uff0c\u5c06\u4e0d\u4f7f\u7528DMA\u3002")),(0,a.kt)("p",null,"\u5728\u4f7f\u80fd",(0,a.kt)("em",{parentName:"p"},"\u5916\u90e8\u6570\u636e\u8bfb\u53d6\u5668"),"\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u4ee3\u7801\u540e\uff0c\u5c06\u521b\u5efa\u4ee5\u4e0b\u9644\u52a0\u6587\u4ef6\uff0c\u4ee5\u652f\u6301\u76f4\u63a5\u4ece\u975e\u5b58\u50a8\u5668\u6620\u5c04\u95ea\u5b58\u4e2d\u68c0\u7d22\u56fe\u7247\u8d44\u6e90\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedDataReader.cpp")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedDataReader.hpp")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/TouchGFXDataReader.cpp")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/TouchGFXDataReader.hpp"))),(0,a.kt)("p",null,"\u50cf\u5f80\u5e38\u4e00\u6837\uff0c\u5bf9\u4e8eTouchGFX Generator\u751f\u6210\u7684\u4ee3\u7801\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedDataReader"),"\u4e3a\u53ea\u8bfb\uff0c\u7528\u6237\u4fee\u6539\u5e94\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXDataReader"),"\u7c7b\u4e2d\u8fdb\u884c\u3002 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedDataReader"),"\u7684\u7c7b\u578b\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"touchgfx::FlashDataReader"),"\u3002"),(0,a.kt)("p",null,"\u5c06TouchGFX HAL\u914d\u7f6e\u4e3a\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"DataReader"),"\uff0c\u5e76\u5bf9\u4ee5\u4e0b\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXConfiguration.cpp")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedHAL.cpp")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFX/target/generated/TouchGFXGeneratedHAL.hpp"))),(0,a.kt)(o.Z,{mdxType:"Note"},"\u4ec5\u5f53\u7981\u7528DMA2D\u548cLTDC\u65f6\uff0cDataReader\u9644\u52a0\u529f\u80fd\u624d\u53ef\u7528\u3002"),(0,a.kt)("h4",T({},{id:"8bit-ltdc-color-look-up-table"}),"8\u4f4dLTDC\u989c\u8272\u67e5\u8be2\u8868"),(0,a.kt)("p",null,"\u5f53LTDC\u88ab\u914d\u7f6e\u4e3a\u8bfb\u53d6L8\u683c\u5f0f\u7684\u5e27\u7f13\u51b2\u5668\u548cTouchGFX\u6e32\u67d3 ",(0,a.kt)("a",T({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___a_b_g_r2222"}),"ABRG2222"),"\u3001 ",(0,a.kt)("a",T({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___a_r_g_b2222"}),"ARGB222"),"\u3001 ",(0,a.kt)("a",T({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___b_g_r_a2222"}),"BGRA2222"),"\u6216 ",(0,a.kt)("a",T({parentName:"p"},{href:"../../api/classes/classtouchgfx_1_1_l_c_d8bpp___r_g_b_a2222"}),"RGBA2222"),"\u683c\u5f0f\u65f6, TouchGFX Generator\u5c06\u63d0\u4f9b\u4e00\u4e2aCLUT\uff08\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXHAL::initialize()"),"\u6267\u884c\u671f\u95f4\u52a0\u8f7d\u5230LTDC\uff09\u3002 \u6709\u5173LTDC\u548cCLUT\u7684\u7528\u6cd5\uff0c\u8be6\u89c1STM32 MCU\u53c2\u8003\u624b\u518c\u3002"),(0,a.kt)("h2",T({},{id:"video-decoding"}),"\u89c6\u9891\u89e3\u7801"),(0,a.kt)("p",null,"\u2018\u89c6\u9891\u89e3\u7801\u2019\u90e8\u5206\u53ef\u8ba9\u5f00\u53d1\u8005\u901a\u8fc7\u786c\u4ef6\u6216\u8f6f\u4ef6\u89c6\u9891\u89e3\u7801\u80fd\u529b\u589e\u5f3aTouchGFX HAL\u3002"),(0,a.kt)("p",null,"\u89c6\u9891\u89e3\u7801\u4ec5\u652f\u6301RGB565\uff0816bpp\uff09\u548cRGB888\uff0824bpp\uff09\u683c\u5f0f\u7684\u5e27\u7f13\u51b2\u533a\u3002 \u5982\u679c\u6ca1\u6709\u9009\u62e9\u8fd9\u4e24\u79cd\u683c\u5f0f\uff0c\u5219\u89c6\u9891\u89e3\u7801\u90e8\u5206\u5c06\u4e0d\u53ef\u7528\u3002"),(0,a.kt)(o.Z,{mdxType:"Note"},"\u4e0d\u662f\u6240\u6709MCU\u90fd\u652f\u6301\u786c\u4ef6\u89c6\u9891\u89e3\u7801\u3002"),(0,a.kt)("h3",T({},{id:"video-decoding-type"}),"\u7c7b\u578b"),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u89c6\u9891\u89e3\u7801\u7684\u201d\u7c7b\u578b\u201d\u662f\u7981\u7528\u7684\u3002 \u5982\u679cSTM32CubeMX\u4e2d\u6ca1\u6709\u542f\u7528\u6240\u9700\u7684\u5916\u8bbe\uff0c\u201c\u8f6f\u4ef6\u89e3\u7801\u201d\u548c\u201c\u786c\u4ef6\u89e3\u7801\u201d\u90fd\u5c06\u663e\u793a\u4e3a\u7070\u8272\u3002 \u5c06\u9f20\u6807\u60ac\u505c\u5728\u7070\u8272\u7684\u9009\u9879\u4e0a\uff0c\u770b\u770b\u9700\u8981\u54ea\u4e9b\u5916\u8bbe\u3002"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-dependecies-info-box.png",width:"800",mdxType:"Figure"},"\u4fe1\u606f\u6846\u663e\u793a\u201c\u786c\u4ef6\u89e3\u7801\u201d\u7684\u89c6\u9891\u7c7b\u578b\u4f9d\u8d56\u9879"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u8f6f\u4ef6")," - \u5982\u679c\u5728STM32CubeMX\u7684\u4e2d\u95f4\u4ef6\u90e8\u5206\u542f\u7528\u4e86LIBJPEG\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u201c\u8f6f\u4ef6\u201d\u9009\u9879\uff0c\u5e76\u751f\u6210\u8f6f\u4ef6\u89e3\u7801\u5668\u3002 \u8fd9\u610f\u5473\u7740TouchGFX Generator\u5c06\u751f\u6210\u4e00\u4e2a\u8f6f\u4ef6MJPEG\u89e3\u7801\u5668\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u786c\u4ef6")," - \u5982\u679c\u5728\u591a\u5a92\u4f53\u90e8\u5206\u542f\u7528\u4e86JPEG\uff0c\u5e76\u4e14\u5728TouchGFX Generator\u4e2d\u9009\u62e9\u4e86\u7b26\u5408CMSIS\u8981\u6c42\u7684RTOS\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u201c\u786c\u4ef6\u201d\u9009\u9879\u3002")),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-options-4-18.png",width:"800",mdxType:"Figure"},"\u89c6\u9891\u89e3\u7801\u7c7b\u578b\u9009\u9879"),(0,a.kt)("p",null,"\u5728LIBJPEG\u8bbe\u7f6e\u4e2d\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u201cRGB\u626b\u63cf\u7ebf\u683c\u5f0f\u201d\u4e2d\u7684RGB\u6392\u5e8f\u5fc5\u987b\u8bbe\u7f6e\u4e3a\u201cBGR\u201d\u800c\u4e0d\u662f\u201cRGB\u201d\u3002 \u6bcf\u4e2a\u50cf\u7d20\u7684\u5b57\u8282\u6570\u5fc5\u987b\u8bbe\u7f6e\u4e3a3\u3002"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/libjpeg-rgb-ordering.png",width:"700",mdxType:"Figure"},"\u9700\u8981\u7684LIBJPEG RGB\u626b\u63cf\u7ebf\u683c\u5f0f\u8bbe\u7f6e"),(0,a.kt)("p",null,"\u4f7f\u7528\u786c\u4ef6\u89e3\u7801\u65f6\uff0cJPEG\u8bbe\u7f6e\u4e2d\u7684RGB\u683c\u5f0f\u5fc5\u987b\u4e0e\u663e\u793a\u5c4f\u76f8\u540c\u3002"),(0,a.kt)(l.Z,{mdxType:"FurtherReading"},"\u6709\u5173\u4e0d\u540c\u89c6\u9891\u89e3\u7801",(0,a.kt)(p.Z,{to:"scenarios/scenarios-video-decoding",mdxType:"Link"},"\u573a\u666f"),"\u7684\u5177\u4f53\u793a\u4f8b\u4ee3\u7801\uff0c\u8bf7\u53c2\u89c1\u201c\u573a\u666f\u201d\u90e8\u5206\u3002"),(0,a.kt)("h3",T({},{id:"video-decoding-number"}),"\u5e76\u53d1\u89c6\u9891"),(0,a.kt)("p",null,"\u201c\u5e76\u53d1\u89c6\u9891\u201d\u9009\u9879\u53ef\u8bbe\u7f6eGUI\u4e2d\u4efb\u610f\u7ed9\u5b9a\u65f6\u95f4\u5728\u540c\u4e00\u5c4f\u5e55\u4e0a\u540c\u65f6\u88ab\u89e3\u7801\u7684\u6700\u5927\u6570\u91cf\u89c6\u9891\u3002 \u5982\u679c\u5e0c\u671b\u4e00\u5757\u5c4f\u5e55\u4e0a\u53ea\u89e3\u7801\u4e00\u4e2a\u89c6\u9891\uff0c\u5219\u53ef\u4ee5\u5c06\u201c\u89c6\u9891\u6570\u91cf\u201d\u8bbe\u7f6e\u4e3a1\u3002"),(0,a.kt)("p",null,"\u6700\u591a\u53ef\u4ee5\u540c\u65f6\u89e3\u78014\u4e2a\u89c6\u9891\u3002"),(0,a.kt)("h3",T({},{id:"video-decoding-strategy"}),"\u7b56\u7565"),(0,a.kt)("p",null,"\u5173\u4e8e\u89c6\u9891\u89e3\u7801\u7b56\u7565\uff0c\u5f00\u53d1\u4eba\u5458\u6709\u4e09\u79cd\u9009\u62e9\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u201c\u76f4\u63a5\u5230\u5e27\u7f13\u5b58\u533a\uff08Direct to Framebuffer\uff09\u201d")," - \u89c6\u9891\u5728UI\u7ebf\u7a0b\u4e2d\u88ab\u89e3\u7801\u3002 \u89e3\u7801\u901f\u5ea6\u6162\u4e8e\u5176\u4ed6\u7b56\u7565\u3002 \u4f7f\u7528\u786c\u4ef6\u89c6\u9891\u89e3\u7801\u65f6\uff0c\u201c\u76f4\u63a5\u5230\u5e27\u7f13\u5b58\u533a\uff08Direct to Framebuffer\uff09\u201d\u9009\u9879\u4e0d\u53ef\u7528\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5355\u7f13\u51b2\u533a")," - \u5728\u4e13\u7528\u7684\u7f13\u51b2\u533a\u4e2d\uff0c\u4ee5\u5355\u72ec\u7684\u4efb\u52a1\u8fdb\u884c\u89c6\u9891\u89e3\u7801\u3002 \u8be5\u7f13\u51b2\u533a\u4f4d\u4e8e\u5185\u90e8\u5b58\u50a8\u5668\u4e2d\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u53cc\u7f13\u51b2\u533a")," - \u5728\u4e24\u4e2a\u4e13\u7528\u7f13\u51b2\u533a\u4e2d\uff0c\u4ee5\u5355\u72ec\u7684\u4efb\u52a1\u8fdb\u884c\u89c6\u9891\u89e3\u7801\uff0c\u4ee5\u727a\u7272\u5185\u5b58\u4e3a\u4ee3\u4ef7\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002")),(0,a.kt)("p",null,"\u91c7\u7528\u5355\u6216\u53cc\u5e27\u7f13\u5b58\u533a\u7b56\u7565\u65f6\uff0c\u5fc5\u987b\u542f\u7528\u7b26\u5408CMSIS\u8981\u6c42\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-rtos-requirement-info-box.png",width:"750",mdxType:"Figure"},"\u5173\u4e8eCMSIS RTOS\u8981\u6c42\u7684\u4fe1\u606f\u6846"),(0,a.kt)(o.Z,{mdxType:"Note"},"\u4f7f\u7528\u53cc\u7f13\u51b2\u533a\u7b56\u7565\u65f6\uff0c\u8981\u6ce8\u610f\u5185\u5b58\u6d88\u8017\u3002"),(0,a.kt)(l.Z,{mdxType:"FurtherReading"},"\u5173\u4e8e\u914d\u7f6e\u7528\u4e8e\u89c6\u9891\u89e3\u7801\u7684FreeRTOS\u7684\u5177\u4f53\u793a\u4f8b\uff0c\u8bf7\u53c2\u89c1",(0,a.kt)(p.Z,{to:"scenarios/scenarios-video-decoding",mdxType:"Link"},"\u201c\u573a\u666f\u201d"),"\u90e8\u5206\u3002"),(0,a.kt)("h3",T({},{id:"decode-format"}),"\u89e3\u7801\u683c\u5f0f"),(0,a.kt)("p",null,"\u5bf9\u4e8e\u8f6f\u4ef6\u89e3\u7801\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u9009\u62e9RGB\u7f13\u51b2\u533a\u7684\u50cf\u7d20\u683c\u5f0f\uff0c\u4e0d\u7ba1\u5e27\u7f13\u5b58\u533a\u7684\u50cf\u7d20\u683c\u5f0f\u662f\u4ec0\u4e48\u3002 TouchGFX Generator\u751f\u6210\u7684\u4ee3\u7801\u5141\u8bb8ChromART\u5728\u4e0d\u540c\u7684\u683c\u5f0f\u4e4b\u95f4\u8fdb\u884c\u50cf\u7d20\u683c\u5f0f\u8f6c\u6362\u3002 \u89c6\u9891\u89e3\u7801\u7f13\u51b2\u533a\u4f7f\u7528RGB565\u683c\u5f0f\u65f6\uff0c\u4f1a\u4f7f\u5f00\u53d1\u8005\u5360\u7528\u7684\u5185\u5b58\u66f4\u5c11\u3002"),(0,a.kt)(r.Z,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/video-decoding-decode-format.png",width:"700",mdxType:"Figure"},"\u89e3\u7801\u683c\u5f0f"),(0,a.kt)("h3",T({},{id:"video-decoding-buffer-size"}),"\u7f13\u5b58\u5927\u5c0f\uff1a"),(0,a.kt)("p",null,"\u7f13\u51b2\u533a\u7684\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u8bbe\u7f6e\u5fc5\u987b\u5bf9\u5e94\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6700\u5927\u89c6\u9891\u5c3a\u5bf8\u3002 \u5bbd\u5ea6\u503c\u5fc5\u987b\u80fd\u88ab32\u6574\u9664\u3002"),(0,a.kt)("p",null,"\u4ee5\u4e0b\u4ee3\u7801\u662f\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedHAL.cpp"),"\u4e2d\u751f\u6210\u7684\u4ee3\u7801\uff0c\u6b64\u5e94\u7528\u4e2d\uff0c\u4f7f\u7528\u4e86RGB888\u683c\u5f0f\u7684\u663e\u793a\u5c4f\uff0c\u5e76\u4f7f\u7528480*272\u89c6\u9891\u548c\u201c\u5355\u7f13\u51b2\u533a\u201d\u89c6\u9891\u89e3\u7801\u7b56\u7565\u3002"),(0,a.kt)(i.Z,{mdxType:"CodeHeader"},"TouchGFXGeneratedHAL.cpp"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp"}),"\n#include <DedicatedBufferVideoController.hpp>\n#include <SoftwareMJPEGDecoder.hpp>\n\nuint32_t lineBuffer[480];\n\nSoftwareMJPEGDecoder mjpegdecoder1((uint8_t*)lineBuffer);\n\nuint32_t videoRGBBuffer[97920];\nDedicatedBufferController<1, 480, 272, 480*3U, Bitmap::RGB888> videoController;\n\n//Singleton Factory\nVideoController& VideoController::getInstance()\n{\n    return videoController;\n}\n\nvoid TouchGFXGeneratedHAL::initialize()\n{\n    HAL::initialize();\n    registerEventListener(*(Application::getInstance()));\n    setFrameBufferStartAddresses((void*)frameBuf, (void*)(frameBuf + sizeof(frameBuf) / (sizeof(uint32_t) * 2)), (void*)0);\n\n    /*\n     * Add software decoder to video controller\n     */\n    videoController.addDecoder(mjpegdecoder1, 0);\n\n    videoController.setRGBBuffer((uint8_t*)videoRGBBuffer, sizeof(videoRGBBuffer));\n}\n")),(0,a.kt)("h2",T({},{id:"generated-project"}),"\u751f\u6210\u7684\u9879\u76ee"),(0,a.kt)("p",null,"\u4f7f\u7528STM32CubeMX\u4e2d\u7684",(0,a.kt)("strong",{parentName:"p"},"\u751f\u6210\u4ee3\u7801"),"\u6309\u94ae\u751f\u6210\u4ee3\u7801\u65f6\uff0cTouchGFX\uff08\u81f3\u5c11\uff09\u9002\u7528\u4e8e\u4ee5\u4e0bIDE\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"EWARM"),(0,a.kt)("li",{parentName:"ol"},"MDK-ARM"),(0,a.kt)("li",{parentName:"ol"},"STM32CubeIDE")),(0,a.kt)("p",null,"\u8981\u83b7\u5f97\u6700\u4f18\u9879\u76ee\u7ed3\u6784\uff0c\u8bf7\u9009\u62e9\u4ee5\u4e0b\u9879\u76ee\u751f\u6210\u9009\u9879\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5e94\u7528\u7ed3\u6784\uff1a",(0,a.kt)("strong",{parentName:"li"},"\u9ad8\u7ea7")),(0,a.kt)("li",{parentName:"ul"},"\u7981\u7528",(0,a.kt)("strong",{parentName:"li"},"\u5728\u6839\u4e0b\u751f\u6210"),"(\u4ec5\u9650STM32CubeIDE)")),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/project-manager.png",noShadow:!1,mdxType:"Figure"},"\u9009\u62e9\u201c\u9ad8\u7ea7\u5e94\u7528\u7ed3\u6784\u201d\uff0c\u7136\u540e\u53d6\u6d88\u9009\u62e9\u201c\u5728\u6839\u4e0b\u751f\u6210\u201d"),(0,a.kt)("p",null,"STM32CubeMX\u8fd8\u5c06\u751f\u6210\u5177\u6709\u4ee5\u4e0b\u7ed3\u6784\u7684",(0,a.kt)("em",{parentName:"p"},"TouchGFX"),"\u6587\u4ef6\u5939:"),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/folder-b.png",noShadow:!1,mdxType:"Figure"},"TouchGFX\u6587\u4ef6\u5939\u7ed3\u6784"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"\u5e94\u7528"),"\u6587\u4ef6\u5939\uff0c\u5305\u542b\u7528\u4e8e\u521d\u59cb\u5316\u548c\u542f\u52a8TouchGFX\u7684\u4ee3\u7801\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"\u76ee\u6807"),"\u6587\u4ef6\u5939\uff0c\u5305\u542b\u751f\u6210\u7684\u53ea\u8bfb\u4ee3\u7801(\u5728\u5185\u90e8\u751f\u6210) \u548c\u53ef\u66f4\u6539\u7684\u7528\u6237\u7c7b(",(0,a.kt)("inlineCode",{parentName:"li"},"STM32TouchController.cpp"),"\u3001",(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFXGPIO.cpp"),"\u548c",(0,a.kt)("inlineCode",{parentName:"li"},"TouchGFXHAL.cpp"),")"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},".part"),"\u6587\u4ef6\uff0c\u4f7f\u7528TouchGFX Designer\u6765\u6253\u5f00\uff0c\u4ee5\u4fbf\u521b\u5efa\u5b8c\u6574\u7684TouchGFX\u9879\u76ee\uff0c\u5176\u4e2d\u5305\u62ecTouchGFX\u5934\u6587\u4ef6\u548c\u5e93\u3002part\u6587\u4ef6\u5305\u542b\u8bbe\u8ba1\u4eba\u5458\u5728\u751f\u6210TouchGFX\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u65f6\u4f7f\u7528\u7684\u76f8\u5173\u7a0b\u5e8f\u4fe1\u606f\uff0c\u5982\u50cf\u7d20\u683c\u5f0f\u548c\u5c4f\u5e55\u5c3a\u5bf8\u3002")),(0,a.kt)("h2",T({},{id:"touchgfx-designer-project"}),"TouchGFX Designer\u9879\u76ee"),(0,a.kt)("p",null,"The following json structure is an example of the contents of the ",(0,a.kt)("inlineCode",{parentName:"p"},".part")," file mentioned in the ",(0,a.kt)("a",T({parentName:"p"},{href:"#generated-code-architecture"}),"Generated Code Architecture")," section for a project based on STM32U599. The post-generate command in the example below will update the project selected by the user in STM32CubeMX Project Manager tab (e.g. EWARM) with required libraries for TouchGFX and optional components as well as new files created by TouchGFX designer (e.g. new screens and assets)."),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-json"}),'{\n  "Application": {\n    "Name": "STM32U599J-DK",\n    "TouchGfxPath": "../Middlewares/ST/touchgfx",\n    "AvailableColorDepths": [ 24 ],\n    "AvailableLCDs":\n    {\n      "24": "LCDGPU2D"\n    },\n    "AvailableResolutions": [\n      {\n        "Width": 480,\n        "Height": 480\n      }\n    ],\n    "PostGenerateTargetCommand": "touchgfx update_project",\n    "Family": "STM32U5",\n    "SubFamily": "STM32U599/5A9",\n    "Platform": "m33",\n    "ProjectFile": "../STM32U599J-DK.ioc",\n    "OptionalComponentsRoot": "../Middlewares/ST/touchgfx_components",\n    "OptionalComponents": [\n      "GPU2D"\n    ]\n  },\n  "Version": "4.19.0"\n}\n')),(0,a.kt)("p",null,"\u4f7f\u7528TouchGFX Designer\u6253\u5f00",(0,a.kt)("em",{parentName:"p"},".part"),"\u6587\u4ef6\u65f6\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u9009\u62e9\u52a0\u8f7d\u73b0\u5b58UI\u6216\u4ece\u7a7a\u767d\u6a21\u677f\u5f00\u59cb\u3002"),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/choose-ui-4-17.png",noShadow:!1,mdxType:"Figure"},"\u9009\u62e9UI"),(0,a.kt)("p",null,"\u6309\u4e0bTouchGFX Designer\u4e2d\u7684",(0,a.kt)("em",{parentName:"p"},"\u751f\u6210\u4ee3\u7801"),"\u540e\uff0cTouchGFX\u6587\u4ef6\u5939\u7684\u7ed3\u6784\u5982\u4e0b\u6240\u793a\u3002 \u4e0b\u56fe\u663e\u793a\u4e86TouchGFX\u6587\u4ef6\u5939\u7ed3\u6784\u7684\u5177\u4f53\u793a\u4f8b\uff0c\u5e76\u7740\u91cd\u663e\u793a\u4e86\u751f\u6210\u540e\u7684\u65b0\u6587\u4ef6\u53ca\u6587\u4ef6\u5939\u3002"),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/designer-gen-code-4-17.png",noShadow:!1,mdxType:"Figure"},"\u751f\u6210\u4ee3\u7801"),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/post-designer-generation.png",noShadow:!1,mdxType:"Figure"},"TouchGFX\u6587\u4ef6\u5939\u7ed3\u6784"),(0,a.kt)("p",null,"TouchGFX\u5c06\u4ece.ioc STM32CubeMX\u6587\u4ef6\uff08\u9002\u7528\u4e8eSTM32CubeIDE\u3001EWARM\u3001MDK-ARM\uff09\u4e2d\u68c0\u6d4b\u6240\u9009\u7684IDE\uff0c\u5e76\u4f7f\u7528\u65b0\u751f\u6210\u7684\u6587\u4ef6\uff08\u5982\u7528\u4e8e\u5c4f\u5e55\u5b9a\u4e49\u3001\u56fe\u50cf\u548c\u5b57\u4f53\u7684\u6587\u4ef6\uff09\u6765\u66f4\u65b0\u5de5\u7a0b\u6587\u4ef6\u3002"),(0,a.kt)("p",null,"\u6b64\u65f6\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5207\u6362\u4f7f\u7528STM32CubeMX\u3001TouchGFX Designer\u548c\u5de5\u5177\u94fe/IDE\uff0c\u5176\u4e2d\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"STM32CubeMX\u53ef\u4ee5\u66f4\u65b0IDE\u9879\u76ee\u4e2d\u7684\u9a71\u52a8\u7a0b\u5e8f"),(0,a.kt)("li",{parentName:"ul"},"\u4e0eUI\u76f8\u5173\u7684\u914d\u7f6e\u4fee\u6539\u4f1a\u7531STM32CubeMX\u66f4\u65b0\u5230TouchGFX",(0,a.kt)("em",{parentName:"li"},"\xa0.part"),"\u6587\u4ef6\uff0cTouchGFX designer\u53ef\u4ee5\u7acb\u5373\u83b7\u53d6\u8fd9\u4e9b\u66f4\u6539"),(0,a.kt)("li",{parentName:"ul"},"STM32CubeMX\u57fa\u4e8eTouchGFX\u5728\u7279\u5b9a\u5e73\u53f0\u6240\u9700\u7684TouchGFX Generator\u914d\u7f6e\u6765\u751f\u6210HAL\u4ee3\u7801\uff08TouchGFX/target/generated/\uff09\u3002"),(0,a.kt)("li",{parentName:"ul"},"TouchGFX Designer\u4f7f\u7528\u751f\u6210\u7684\u4ee3\u7801\u6765\u66f4\u65b0\u9879\u76ee\u3002")),(0,a.kt)(o.Z,{mdxType:"Note"},"\u5bf9\u4e8e\u53cc\u6838\u9879\u76ee\uff0c\u4e3a\u7279\u5b9a\u4e0a\u4e0b\u6587\u542f\u7528TouchGFX\uff0c\u5219TouchGFX\u9879\u76ee\u901a\u5e38\u4f1a\u4f4d\u4e8e\u8be5\u4e0a\u4e0b\u6587\u7684\u4e13\u7528\u6587\u4ef6\u5939\u4e2d\uff0c\u4f8b\u5982:\u201cCM4 / TouchGFX\u201d\u6216\u201cCM7 / TouchGFX\u201d\u3002"),(0,a.kt)("h2",T({},{id:"modifying-generated-behavior"}),"\u4fee\u6539\u751f\u6210\u6587\u4ef6"),(0,a.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8eHAL\u7684\u7c7b\u5c42\u6b21\u7ed3\u6784\uff0c\u7528\u6237\u53ef\u4ee5\u91cd\u5199STM32CubeMX\u751f\u6210\u7684HAL\u914d\u7f6e\u6216\u64cd\u4f5c\u3002 \u5728\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u4fee\u6539",(0,a.kt)("inlineCode",{parentName:"p"},"\u521d\u59cb\u5316"),"\u51fd\u6570\uff0c\u4ee5\u989d\u5916\u914d\u7f6eTouchGFX\uff0c\u6216\u4fee\u6539",(0,a.kt)("inlineCode",{parentName:"p"},"TouchGFXGeneratedHAL"),"\u4e2d\u73b0\u6709\u7684\u914d\u7f6e\u96c6\u3002"),(0,a.kt)(i.Z,{mdxType:"CodeHeader"},"TouchGFXHAL.cpp"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{className:"language-cpp"}),"void TouchGFXHAL::initialize()\n{\n    // Calling parent implementation of initialize().\n    //\n    // \u82e5\u8981\u8986\u5199\u751f\u6210\u7684\u5b9e\u73b0\uff0c\u8bf7\u5ffd\u7565\u5bf9\u7236\u51fd\u6570\u7684\u8c03\u7528\n    // \u5e76\u5728\u6b64\u5904\u5b9e\u73b0\u6240\u9700\u7684\u529f\u80fd\u3002\n    // \u8bf7\u6ce8\u610f\uff1a\u5fc5\u987b\u8c03\u7528HAL::initialize()\u4ee5\u521d\u59cb\u5316\u6846\u67b6\u3002\n\n    TouchGFXGeneratedHAL::initialize();\n\n    //\u8986\u76d6\u914d\u7f6e\n    hal.lockDMAToFrontPorch(true);\n    hal.setFingerSize(4);\n    hal....\n}\n")),(0,a.kt)("h2",T({},{id:"upgrading-projects"}),"\u5347\u7ea7\u9879\u76ee"),(0,a.kt)("p",null,"TouchGFX Generator\u53c2\u6570\u5b58\u50a8\u5728.ioc\u6587\u4ef6\u4e2d\uff08STM32CubeMX\u9879\u76ee\uff09\u3002 \u5f53\u53d1\u5e03\u65b0\u7248TouchGFX Generator\u65f6\uff0c\u65e7\u7248\u7684\u53c2\u6570\u53ef\u80fd\u4e0e\u65b0\u7248\u7684\u53c2\u6570\u4e0d\u517c\u5bb9\uff0c\u5e76\u53ef\u80fd\u9700\u8981\u79fb\u690d\u3002"),(0,a.kt)("p",null,"\u7531\u4e8eSTM32CubeMX\u4e0d\u652f\u6301X-CUBE\u7248\u672c\u4e4b\u95f4\u7684\u5347\u7ea7\uff0c\u56e0\u6b64\uff0cTouchGFX Designer\u5c06\u4f1a\u81ea\u52a8\u6267\u884c\u5347\u7ea7\uff0c\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},".touchgfx"),"\u6587\u4ef6\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"PostGenerateTargetCommand"),"\u90e8\u5206\u4e2d\u7684\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5728\u6309\u4e0b",(0,a.kt)("em",{parentName:"p"},"\u751f\u6210\u4ee3\u7801"),"\u65f6\u6765\u5b8c\u6210\u5347\u7ea7\u3002"),(0,a.kt)(i.Z,{mdxType:"CodeHeader"},".touchgfx"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{}),'"PostGenerateTargetCommand" : "touchgfx update_project --project-file=../upgrade.ioc --platform=m7"\n')),(0,a.kt)("p",null,"\u8be5\u547d\u4ee4\u5c06\u8bfb\u53d6",(0,a.kt)("inlineCode",{parentName:"p"},".ioc"),"\u6587\u4ef6\u5e76\u66f4\u65b0\u53c2\u6570\uff0c\u4ee5\u9002\u5e94X-CUBE-TOUCHGFX\u7684\u5f53\u524d\u7248\u672c\u3002 \u4ee5\u4e0b\u662f\u901a\u8fc7X-CUBE-TOUCHGFX 4.13.0\u521b\u5efa\u7684.ioc\u6587\u4ef6\u4e0a\u624b\u52a8\u8fd0\u884c\u811a\u672c\uff08X-CUBE-TOUCHGFX 4.14.0\uff09\u7684\u793a\u4f8b\u3002"),(0,a.kt)(i.Z,{mdxType:"CodeHeader"},"\u4f7f\u7528STM32F746 DISCO\u5e94\u7528\u6a21\u677f\u4ece4.13.0\u5347\u7ea7\u52304.14.0\u7684\u793a\u4f8b"),(0,a.kt)("pre",null,(0,a.kt)("code",T({parentName:"pre"},{}),"$ touchgfx update_project --project-file=../STM32F746G_DISCO.ioc\n  TouchGFX Generator 4.13.0 found\n  Creating backup of ../STM32F746G_DISCO.ioc as\n../backup_STM32F746G_DISCO.ioc\n  Performing upgrade 4.13.0 -> 4.14.0 ... OK\n")),(0,a.kt)("p",null,"\u4f7f\u7528STM32CubeMX\u6253\u5f00\u66f4\u65b0\u8fc7\u7684\u9879\u76ee\u65f6\uff0c\u7cfb\u7edf\u4f1a\u63d0\u793a\u7528\u6237\u5b89\u88c5\u7531.ioc\u6587\u4ef6\u63cf\u8ff0\u7684X-CUBE-TOUCHGFX\u7248\u672c\uff08\u5982\u679c\u5c1a\u672a\u5b89\u88c5\uff09\u3002 \u70b9\u51fb",(0,a.kt)("em",{parentName:"p"},"\u7acb\u5373\u4e0b\u8f7d"),"\u540e\u5c06\u4e0b\u8f7d\u5e76\u5b89\u88c5X-Cube-TouchGFX-4.14.0\u3002"),(0,a.kt)(r.Z,{imageSource:"/img/development/touchgfx-hal-development/touchgfx-generator/cubemx-additional-software-manager-settings-missing-x-cube-touchgfx-4.14.0.png",noShadow:!1,mdxType:"Figure"},"\u7f3a\u5931\u7684\u5176\u4ed6\u8f6f\u4ef6\u7ec4\u4ef6\uff1aTouchGFX Generator 4.14.0"),(0,a.kt)("p",null,"\u5347\u7ea7\u671f\u95f4\u5c06\u4fdd\u7559TouchGFX Generator\u4e2d\u7684\u6240\u6709\u914d\u7f6e\uff0c.ioc\u6587\u4ef6\u7684\u5907\u4efd\u6587\u4ef6\u5c06\u88ab\u653e\u5728\u539f\u59cb\u6587\u4ef6\u65c1\uff0c\u5e76\u5e26\u6709\u524d\u7f00",(0,a.kt)("inlineCode",{parentName:"p"},"backup_"),"\u3002"),(0,a.kt)(o.Z,{mdxType:"Note"},"\u8981\u4f7f\u7528TouchGFX Generator\u63d0\u4f9b\u7684\u65b0\u529f\u80fd\uff0c\u5fc5\u987b\u5728STM32CubeMX\u4e2d\u6267\u884c",(0,a.kt)("i",null,"\u751f\u6210\u4ee3\u7801"),"\u3002"),(0,a.kt)(u.Z,{mdxType:"Caution"},"\u5982\u679c\u901a\u8fc7STM32CubeMX\u4e3a\u73b0\u6709\u7684TouchGFX\u9879\u76ee\u5347\u7ea7X-CUBE-TOUCHGFX\uff0c\u5e76\u4e14\u5347\u7ea7\u8fc7\u7a0b\u5e76\u975e\u901a\u8fc7TouchGFX Designer\u6765\u8fd0\u884c\uff0c\u5219TouchGFX Generator\u53c2\u6570\u5c06\u88ab\u91cd\u7f6e\u4e3a\u9ed8\u8ba4\u503c\uff0c\u4ee5\u9002\u7528\u4e8e\u4e0d\u540c\u7248\u672c\u3002"))}v.isMDXComponent=!0}}]);